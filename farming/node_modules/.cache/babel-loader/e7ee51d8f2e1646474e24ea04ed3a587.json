{"ast":null,"code":"import _objectSpread from \"/home/naresh/Desktop/MyProject/farming/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/naresh/Desktop/MyProject/farming/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/naresh/Desktop/MyProject/farming/src/farmer/AddVegetable.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link } from \"react-router-dom\";\nimport { createVegetable } from \"./apiFarmer\";\n\nconst AddVegetable = () => {\n  const _isAuthenticated = isAuthenticated(),\n        user = _isAuthenticated.user,\n        token = _isAuthenticated.token;\n\n  const _useState = useState({\n    name: \"\",\n    price: \"\",\n    quantity: \"\",\n    farmer_id: '',\n    photo: \"\",\n    loading: false,\n    error: \"\",\n    createdVegetable: \"\",\n    redirectToProfile: false,\n    formData: \"\"\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        values = _useState2[0],\n        setValues = _useState2[1];\n\n  const name = values.name,\n        price = values.price,\n        quantity = values.quantity,\n        farmer_id = values.farmer_id,\n        loading = values.loading,\n        error = values.error,\n        createdVegetable = values.createdVegetable,\n        redirectToProfile = values.redirectToProfile,\n        formData = values.formData;\n  useEffect(() => {\n    setValues(_objectSpread({}, values, {\n      formData: new FormData()\n    }));\n  }, []);\n\n  const handleChange = name => event => {\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues(_objectSpread({}, values, {\n      [name]: value\n    }));\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues(_objectSpread({}, values, {\n      error: \"\",\n      loading: true\n    }));\n    console.log(values); // console.log(JSON.stringify(formData));\n\n    createVegetable(user._id, token, formData).then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setValues(_objectSpread({}, values, {\n          name: \"\",\n          price: \"\",\n          quantity: \"\",\n          loading: false,\n          createdVegetable: data.name\n        }));\n      }\n    });\n  };\n\n  const newPostForm = () => React.createElement(\"form\", {\n    className: \"mb-3\",\n    onSubmit: clickSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"Item name\"), React.createElement(\"input\", {\n    onChange: handleChange(\"name\"),\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Item name\",\n    value: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Price\"), React.createElement(\"input\", {\n    onChange: handleChange(\"price\"),\n    type: \"number\",\n    className: \"form-control\",\n    value: price,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Quantity\"), React.createElement(\"input\", {\n    onChange: handleChange(\"quantity\"),\n    type: \"number\",\n    className: \"form-control\",\n    value: quantity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  })), React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Upload Photo\"), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"btn btn-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: handleChange(\"photo\"),\n    type: \"file\",\n    name: \"photo\",\n    accept: \"image/*\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-check\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: handleChange(\"farmer_id\"),\n    type: \"checkbox\",\n    className: \"form-check-input\",\n    value: \"\".concat(user._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    className: \"form-check-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, \" Confirm\")), React.createElement(\"button\", {\n    className: \"btn btn-outline-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"Add Vegetable\"));\n\n  return React.createElement(Layout, {\n    title: \"Add a new vegetable\",\n    description: \"Helloo \".concat(user.name, \", ready to add a new vegetable?\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-8 offset-md-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, newPostForm())));\n};\n\nexport default AddVegetable;","map":{"version":3,"sources":["/home/naresh/Desktop/MyProject/farming/src/farmer/AddVegetable.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","createVegetable","AddVegetable","user","token","name","price","quantity","farmer_id","photo","loading","error","createdVegetable","redirectToProfile","formData","values","setValues","FormData","handleChange","event","value","target","files","set","clickSubmit","preventDefault","console","log","_id","then","data","newPostForm"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link } from \"react-router-dom\";\nimport { createVegetable } from \"./apiFarmer\";\n\nconst AddVegetable = () =>{\n    const { user, token } = isAuthenticated();\n    \n    const [values, setValues] = useState({\n        name: \"\",\n        price: \"\",\n        quantity: \"\",\n        farmer_id: '',\n        photo: \"\",\n        loading: false,\n        error: \"\",\n        createdVegetable: \"\",\n        redirectToProfile: false,\n        formData: \"\"\n    });\n\n    const {\n        name,\n        price,\n        quantity,\n        farmer_id,\n        loading,\n        error,\n        createdVegetable,\n        redirectToProfile,\n        formData\n    } = values;\n\n    useEffect(() => {\n        setValues({ ...values, formData: new FormData() });\n    }, []);\n\n    const handleChange = name => event => {\n        const value =\n            name === \"photo\" ? event.target.files[0] : event.target.value;\n        formData.set(name, value);\n        setValues({ ...values, [name]: value });\n    };\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setValues({ ...values, error: \"\", loading: true });\n        console.log(values);\n       // console.log(JSON.stringify(formData));\n        createVegetable(user._id, token, formData)\n        .then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error });\n                \n            } else {\n                setValues({\n                    ...values,\n                    name: \"\",\n                    price: \"\",\n                    quantity: \"\",\n                    loading: false,\n                    createdVegetable: data.name\n                });\n            }\n        });\n    };\n\n    const newPostForm = () => (\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\n\n\n            <div className=\"form-group\">\n                <label>Item name</label>\n                <input\n                    onChange={handleChange(\"name\")}\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Item name\"\n                    value={name}\n                />\n            </div>\n\n            <div className=\"form-group\">\n                <label >Price</label>\n                <input\n                    onChange={handleChange(\"price\")}\n                    type=\"number\"\n                    className=\"form-control\"\n                    value={price}\n                />\n            </div>\n\n            <div className=\"form-group\">\n                <label >Quantity</label>\n                <input\n                    onChange={handleChange(\"quantity\")}\n                    type=\"number\"\n                    className=\"form-control\"\n                    value={quantity}\n                />\n            </div>\n\n            <h4>Upload Photo</h4>\n            <div className=\"form-group\">\n                <label className=\"btn btn-secondary\">\n                    <input\n                        onChange={handleChange(\"photo\")}\n                        type=\"file\"\n                        name=\"photo\"\n                        accept=\"image/*\"\n                    />\n                </label>\n            </div>\n            <div className=\"form-check\">\n                <input\n                    onChange={handleChange(\"farmer_id\")}\n                    type=\"checkbox\"\n                    className=\"form-check-input\"\n                    value={`${user._id}`}\n                />\n                <label className=\"form-check-label\" > Confirm</label>\n            </div>\n\n            <button className=\"btn btn-outline-primary\">Add Vegetable</button>\n        </form>\n    );\n\n\n    return(\n        <Layout\n            title=\"Add a new vegetable\"\n            description={`Helloo ${user.name}, ready to add a new vegetable?`}\n        >\n            <div className=\"row\">\n                <div className=\"col-md-8 offset-md-2\">\n                   {newPostForm()}\n                </div>\n            </div>\n        </Layout>\n    );\n};\n\nexport default AddVegetable;"]},"metadata":{},"sourceType":"module"}